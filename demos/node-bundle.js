/**
 * Copyright (c) 2016 Craig Monro (kodespace.com)
 * No part of this file may be copied or retransmitted without adhering to the GPL license.
 * This copyright notice may not be removed, without express permission of the copyright holder.
 * https://github.com/cmroanirgo/pl-copyfind/blob/master/LICENSE.md
 */
require=function r(e,t,n){function i(a,u){if(!t[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[a]={exports:{}};e[a][0].call(l.exports,function(r){var t=e[a][1][r];return i(t?t:r)},l,l.exports,r,e,t,n)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(r,e,t){"use strict";var n=r("underscore");(function(){function r(r){return/[ \f\n\r\t\v\u00A0\u2028\u2029]/.test(r)}function i(r){return r=r.charCodeAt(0),r>0&&31>r||255==r||127==r}var o=this,a=(o.TextReader,0),u=1,s=2,c=3,l=o.TextReader=function(r){this._text=r,this._textpos=0,this._gotWord=!1,this._gotDelimiter=!1,this._gotChar=!1,this._char="",this._delimiterType=a};l.prototype.constructor=l,l.prototype.isFinished=function(){return this._delimiterType==c},l.prototype.getCharTxt=function(){return this._textpos<this._text.length?this._text.charAt(this._textpos++):-1},l.prototype.getPos=function(){var r=this._textpos;return this._gotChar&&r--,r},l.prototype.getWord=function(){var e=[];for(this._gotWord=!1,this._gotDelimiter=!1,this._delimiterType=a;;){if(this._gotChar?this._gotChar=!1:this._char=this.getCharTxt(),this._char<0){this._delimiterType=c;var t=e.join("");return t}if("\n"==this._char||"\r"==this._char)this._delimiterType=s,this._gotDelimiter=!0;else if(r(this._char))u>this._delimiterType&&(this._delimiterType=u),this._gotDelimiter=!0;else{if(i(this._char))continue;if(this._gotDelimiter){if(this._gotWord){this._gotChar=!0;var t=e.join("");return t}this._delimiterType=a,this._gotDelimiter=!1,this._gotChar=!0}else e.length<255&&(e.push(this._char),this._gotWord=!0)}}return""},n.isUndefined(t)?o.TextReader=l:(!n.isUndefined(e)&&e.exports&&(t=e.exports=l),t.TextReader=l)}).call(this)},{underscore:"underscore"}],2:[function(r,e,t){"use strict";var n=r("underscore");(function(){function r(r){return r=r.charCodeAt(0),r>=33&&47>=r||r>=58&&64>=r||r>=91&&96>=r||r>=127}function i(r){return/[0-9]/.test(r)}function o(r){return/[a-zA-Z]/.test(r)}var a=this,u=(a.words,{removePunct:function(e){for(var t=[],n=0;n<e.length;n++){var i=e.charAt(n);r(i)||t.push(i)}return t.join("")},outerPunct:function(e){for(var t=0,n=e.length-1,i=0;i<e.length;i++){var o=e.charAt(i);if(!r(o))break;t=i}for(var i=e.length-1;i>t;i--){var o=e.charAt(i);if(!r(o))break;n=i-1}return t>n?"":e.substr(t,n-t+1)},removeNumbers:function(r){for(var e=[],t=0;t<r.length;t++){var n=r.charAt(t);i(n)||e.push(n)}return e.join("")},toLowerCase:function(r){return r.toLowerCase()},isWord:function(r){var e=r.length;if(1>e)return!1;if(!o(r.charAt(0)))return!1;if(!o(r.charAt(e-1)))return!1;for(var t=1;e-2>t;t++){var n=r.charAt(t);if(!o(n)&&"-"!=n&&"'"!=n)return!1}return!0},hash:function(r){var e,t=0;if(0==r.length)return 1;for(var n=0;n<r.length;n++)e=r.charCodeAt(n),t=(t<<7|t>>>25)^e,t>>>=0;return t}}),s=a.words=u;n.isUndefined(t)?a.words=s:(!n.isUndefined(e)&&e.exports&&(t=e.exports=s),t.words=s)}).call(this)},{underscore:"underscore"}],demo:[function(r,e,t){function n(r,e){if(!r)throw"Blob object is required.";r.type||(r.type="text/html");var t=r.type.split("/")[1];if(e&&-1!==e.indexOf(".")){var n=e.split(".");e=n[0],t=n[1]}var i=(e||Math.round(9999999999*Math.random())+888888888)+"."+t;if("undefined"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(r,i);if("undefined"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(r,i);var o=document.createElement("a");o.href=URL.createObjectURL(r),o.target="_blank",o.download=i,navigator.mozGetUserMedia&&(o.onclick=function(){(document.body||document.documentElement).removeChild(o)},(document.body||document.documentElement).appendChild(o));var a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});o.dispatchEvent(a),navigator.mozGetUserMedia||URL.revokeObjectURL(o.href)}function i(r,e){r.match("^http")||(r="http://"+r),console.log("fetching yql request for: "+r),$.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22"+encodeURIComponent(r)+"%22&format=xml'&callback=?",function(r){r.results[0]?(console.log("got yql '"+(r.results[0]+"").slice(0,"20")+"'..."),e(!1,r.results[0])):e({message:"Error: could not load the page."})})}function o(r){r=r.replace(/\r/g,"").replace(/\t{2,}/g,"	").replace(/\s+\n/g,"\n").replace(/\n{3,}/g,"\n\n"),r=r.replace(/<\!DOCTYPE [^>]*?>/g,""),r=r.replace(/<!--[\s\S]*?-->/g,""),r=r.replace(/<\!\[CDATA\[([\s\S]*?)\]\]/g,"$1"),r=r.replace(/<([a-zA-Z]+) [^>]*?\/>/gi,"<$1/>"),r=r.replace(/<([a-zA-Z]+) [^>]*?>/gi,"<$1>"),r=r.replace(/<head[\s\S]*?<\/head>/gi,""),r=r.replace(/<body>/gi,"").replace(/<\/body>/gi,"").replace(/<html>/gi,"").replace(/<\/html>/gi,""),r=r.replace(/<script[^>]*?\/>/gi," "),r=r.replace(/<script[\s\S]*?<\/script>/gi," "),r=r.replace(/<noscript[\s\S]*?<\/noscript>/gi,""),r=r.replace(/<canvas[\s\S]*?<\/canvas>/gi," "),r=r.replace(/<style[\s\S]*?<\/style>/gi," "),r=r.replace(/<footer[\s\S]*?<\/footer>/gi," ").replace(/<nav[\s\S]*?<\/nav>/gi," ").replace(/<header[\s\S]*?<\/header>/gi," ").replace(/<figure[\s\S]*?<\/figure>/gi," ");var e=$("<div>"+r+"</div>");return r=e.text().replace(/\r/g,"").replace(/\s+\n/g,"\n").replace(/ {2,}/g," ").replace(/\n{3,}/g,"\n\n").replace(/\t{2,}/g,"	").trim()}var a={invokeSaveAsDialog:n,fetchUrl:i,stripHtml:o};e&&(e.exports=a)},{}],metadata:[function(r,e,t){e.exports={author:{name:"Craig Monro"},name:"pl-copyfind",version:"0.9.3",description:"ideas are based on those found at plagiarism.bloomfieldmedia.com's CopyFind/WCopyFind",main:"index.js",repository:{type:"git",url:"https://github.com/cmroanirgo/pl-copyfind.git"},directories:{lib:"./lib"},dependencies:{underscore:"latest"},scripts:{"build:base":"browserify -r ./package.json:metadata -r underscore -r ./index.js:pl-copyfind -r ./demos/demo.js:demo","build:debug":"echo building debug... && npm run build:base -s > demos/node-bundle.js","build:release":'echo building release... && npm run build:base -s | uglifyjs --c --m --preamble "/**\n * Copyright (c) 2016 Craig Monro (kodespace.com)\n * No part of this file may be copied or retransmitted without adhering to the GPL license.\n * This copyright notice may not be removed, without express permission of the copyright holder.\n * https://github.com/cmroanirgo/pl-copyfind/blob/master/LICENSE.md\n */"> demos/node-bundle.js',build:"npm run build:release -s"},license:"GPL"}},{}],"pl-copyfind":[function(r,e,t){"use strict";var n=r("underscore"),i=r("./lib/words"),o=r("./lib/textreader");(function(){function r(r,e,t){var n={message:e};return r(n),!1}function a(r,e,t){for(var n=new o(r),a=[],u=[];!n.isFinished();){var s=n.getPos(),c=n.getWord();e.bIgnorePunctuation&&(c=i.removePunct(c)),e.bIgnoreOuterPunctuation&&(c=i.outerPunct(c)),e.bIgnoreNumbers&&(c=i.removeNumbers(c)),e.bIgnoreCase&&(c=c.toLowerCase(c)),e.bSkipLongWords&&c.length>e.SkipLength||e.bSkipNonwords&&!i.isWord(c)||(u.push(s),a.push(i.hash(c)))}var l=a.length,h={};h.WordsTotal=l,h.WordHash=a,h.WordPos=u,h.SortedWords=[],h.DocLength=r.length;for(var f=0;l>f;f++)h.SortedWords.push({number:f,hash:a[f]});if(h.SortedWords.sort(function(r,e){return r.hash-e.hash}),1==e.PhraseLength)h.FirstHash=0;else{for(var p=0,f=0;l>f;f++)if(0!=(4290772992&h.SortedWords[f].hash)){p=f;break}h.FirstHash=p}return h}function u(r,e,t,n){function i(r,e,t,n,i){return 200*i/(t-r+n-e+2)}var o,a,u,s,c,l,h,f,p,d,y,b,M,k,T,W,_,x,L,R,S,w,j;n.i={MatchMarkL:[],MatchMarkR:[],MatchAnchorL:[],MatchAnchorR:[],MatchMarkTempL:[],MatchMarkTempR:[],MatchingDocumentPairs:0,MatchingWordsPerfect:0,MatchingWordsTotalL:0,MatchingWordsTotalR:0};var A=[];for(o=0;o<r.WordsTotal;o++)n.i.MatchMarkL[o]=g,n.i.MatchAnchorL[o]=0;for(a=0;a<e.WordsTotal;a++)n.i.MatchMarkR[a]=g,n.i.MatchAnchorR[a]=0;for(o=r.FirstHash,a=e.FirstHash,w=0;o<r.WordsTotal&&a<e.WordsTotal;)if(n.i.MatchMarkL[r.SortedWords[o].number]==g)if(n.i.MatchMarkR[e.SortedWords[a].number]==g)if(r.SortedWords[o].hash<e.SortedWords[a].hash){if(o++,o>=r.WordsTotal)break}else if(r.SortedWords[o].hash>e.SortedWords[a].hash){if(a++,a>=e.WordsTotal)break}else{for(R=r.SortedWords[o].hash,u=o,s=a;u<r.WordsTotal-1&&r.SortedWords[u+1].hash==R;)u++;for(;s<e.WordsTotal-1&&e.SortedWords[s+1].hash==R;)s++;for(c=o;u>=c;c++)if(n.i.MatchMarkL[r.SortedWords[c].number]==g)for(l=a;s>=l;l++)if(n.i.MatchMarkR[e.SortedWords[l].number]==g){for(n.i.MatchMarkTempL[r.SortedWords[c].number]=v,n.i.MatchMarkTempR[e.SortedWords[l].number]=v,h=r.SortedWords[c].number-1,p=r.SortedWords[c].number+1,f=e.SortedWords[l].number-1,d=e.SortedWords[l].number+1;h>=0&&f>=0&&n.i.MatchMarkL[h]==g&&n.i.MatchMarkR[f]==g&&r.WordHash[h]==e.WordHash[f];)n.i.MatchMarkTempL[h]=v,n.i.MatchMarkTempR[f]=v,h--,f--;for(;p<r.WordsTotal&&d<e.WordsTotal&&n.i.MatchMarkL[p]==g&&n.i.MatchMarkR[d]==g&&r.WordHash[p]==e.WordHash[d];)n.i.MatchMarkTempL[p]=v,n.i.MatchMarkTempR[d]=v,p++,d++;if(y=h+1,b=f+1,M=p-1,k=d-1,S=M-y+1,t.MismatchTolerance>0){for(T=y,W=b,_=M,x=k,L=0;h>=0&&f>=0&&n.i.MatchMarkL[h]==g&&n.i.MatchMarkR[f]==g;)if(r.WordHash[h]!=e.WordHash[f]){if(L++,L>t.MismatchTolerance)break;if(h-1>=0){if(n.i.MatchMarkL[h-1]!=g)break;if(r.WordHash[h-1]==e.WordHash[f]){if(i(h-1,f,_,x,S+1)<t.MismatchPercentage)break;n.i.MatchMarkTempL[h]=m,h--,S++,L=0,n.i.MatchMarkTempL[h]=v,n.i.MatchMarkTempR[f]=v,y=h,b=f,h--,f--;continue}}if(f-1>=0){if(n.i.MatchMarkR[f-1]!=g)break;if(r.WordHash[h]==e.WordHash[f-1]){if(i(h,f-1,_,x,S+1)<t.MismatchPercentage)break;n.i.MatchMarkTempR[f]=m,f--,S++,L=0,n.i.MatchMarkTempL[h]=v,n.i.MatchMarkTempR[f]=v,y=h,b=f,h--,f--;continue}}if(i(h-1,f-1,_,x,S)<t.MismatchPercentage)break;n.i.MatchMarkTempL[h]=m,n.i.MatchMarkTempR[f]=m,h--,f--}else S++,L=0,n.i.MatchMarkTempL[h]=v,n.i.MatchMarkTempR[f]=v,y=h,b=f,h--,f--;for(L=0;p<r.WordsTotal&&d<e.WordsTotal&&n.i.MatchMarkL[p]==g&&n.i.MatchMarkR[d]==g;)if(r.WordHash[p]!=e.WordHash[d]){if(L++,L==t.MismatchTolerance)break;if(p+1<r.WordsTotal){if(n.i.MatchMarkL[p+1]!=g)break;if(r.WordHash[p+1]==e.WordHash[d]){if(i(T,W,p+1,d,S+1)<t.MismatchPercentage)break;n.i.MatchMarkTempL[p]=m,p++,S++,L=0,n.i.MatchMarkTempL[p]=v,n.i.MatchMarkTempR[d]=v,M=p,k=d,p++,d++;continue}}if(d+1<e.WordsTotal){if(n.i.MatchMarkR[d+1]!=g)break;if(r.WordHash[p]==e.WordHash[d+1]){if(i(T,W,p,d+1,S+1)<t.MismatchPercentage)break;n.i.MatchMarkTempR[d]=m,d++,S++,L=0,n.i.MatchMarkTempL[p]=v,n.i.MatchMarkTempR[d]=v,M=p,k=d,p++,d++;continue}}if(i(T,W,p+1,d+1,S)<t.MismatchPercentage)break;n.i.MatchMarkTempL[p]=m,n.i.MatchMarkTempR[d]=m,p++,d++}else S++,L=0,n.i.MatchMarkTempL[p]=v,n.i.MatchMarkTempR[d]=v,M=p,k=d,p++,d++}if(S>=t.PhraseLength){w++;var O=function(r,e,t){var n,i=r.WordPos[e];return n=t==r.WordPos.length-1?r.DocLength:r.WordPos[t+1],n-i},P=[],N=[];for(j=y;M>=j;j++)n.i.MatchMarkL[j]=n.i.MatchMarkTempL[j],n.i.MatchMarkTempL[j]==v?n.i.MatchingWordsPerfect++:P.push({pos:r.WordPos[j],length:O(r,j,j)}),n.i.MatchAnchorL[j]=w;for(n.i.MatchingWordsTotalL+=M-y+1,j=b;k>=j;j++)n.i.MatchMarkR[j]=n.i.MatchMarkTempR[j],n.i.MatchAnchorR[j]=w,n.i.MatchMarkTempR[j]!=v&&N.push({pos:e.WordPos[j],length:O(e,j,j)});n.i.MatchingWordsTotalR+=k-b+1;var C={textL:{pos:r.WordPos[y],length:O(r,y,M),wordCount:M-y+1,skipped:P},textR:{pos:e.WordPos[b],length:O(e,b,k),wordCount:k-b+1,skipped:N}};A.push(C)}}o=u+1,a=s+1}else a++;else o++;return n.matches[r.docNum][e.docNum]=A,-1}function s(r,e){if(!r)throw"ASSERTION! "+e}function c(r,e,t,n){return e>0?1==e?"":t?e<r.length+3?"..."+r.slice(-e):r:n?e<r.length+3?r.slice(0,e)+"...":r:r.length<2*e?r:r.slice(0,e)+"...\n\n\n..."+r.slice(-e):r}function l(r,e,t,i,o,a){if(!o.length)return"";for(var u=[],l=0;l<o.length;l++){var h=o[l]["text"+t];h.num=l+1,u.push(h)}u.sort(function(r,e){return r.pos-e.pos});for(var f=a.bBriefReport?a.bTerseReport?1:3*a.PhraseLength*5:0,p=[],d=0,l=0;l<u.length;l++){var g=u[l];s(g.pos>=d,"sorted matches are out of order"),s(g.length>0,"matches' length is invalid");var v,m=n.escape(c(r.slice(d,g.pos),f,0==d,!1));if(g.skipped&&0!=g.skipped.length){v=[],d=g.pos;for(var y=0;y<g.skipped.length;y++){var b=g.skipped[y];s(b.pos>=d,"skipped matches are out of order"),s(b.pos>=g.pos&&b.pos+b.length<=g.pos+g.length,"sorted matches are outside expected range");var M=n.escape(r.slice(d,b.pos)),k='</span><span class="match-partial">'+n.escape(r.slice(b.pos,b.pos+b.length))+'</span><span class="match">';d=b.pos+b.length,v.push(M+k)}d<g.pos+g.length&&v.push(n.escape(r.slice(d,g.pos+g.length))),v='<span class="match">'+v.join("")+"</span>",v=v.split('<span class="match"></span>').join("")}else v='<span class="match">'+n.escape(r.slice(g.pos,g.pos+g.length))+"</span>";v='<a href="#'+e+i+g.num+'" id="'+e+t+g.num+'">'+v+"</a>",p.push(m+v),d=g.pos+g.length}return d<r.length&&p.push(n.escape(c(r.slice(d),f,!1,!0))),p=p.join("").split("\n").join("\n<br>\n"),'\n\n<div class="doc" id="'+e+t+'">\n'+p+"</div>"}function h(r,e,t,n,i,o){var a="doc";(r.length>1||e.length>1)&&(a+=t.docNum+""+n.docNum);var u=o.matches[t.docNum][n.docNum];if(0==u.length)return"";var s=l(r[t.docNum],a,"L","R",u,i),c=l(e[n.docNum],a,"R","L",u,i),h="";return(r.length>1||e.length>1)&&(h+="\n\n<div class='doc-container'><h2>Comparison results of #"+t.docNum+" and #"+n.docNum+"</h2>\n"),h+=s+c+"\n",(r.length>1||e.length>1)&&(h+="</div>"),h}function f(e,t,i,o){Date.now||(Date.now=function(){return(new Date).getTime()});var s=Date.now();n.isFunction(i)&&(o=i,i={}),n.defaults(i,d);var c=n.isString(e)&&n.isString(t);if(n.isString(e)&&(e=[e]),n.isString(t)&&(t=[t]),!n.isArray(e)||0==e.length||!n.isString(e[0]))return r(o,"'Left' source text must be a string or an array of strings.");if(!n.isArray(t)||0==t.length||!n.isString(t[0]))return r(o,"'Right' source text must be a string or an array of strings.");var l={matches:[],hashesL:[],hashesR:[]};if(i.hashesL){if(i.hashesL.length!=e.length)return r(o,"options.hashesL is invalid");l.hashesL=i.hashesL}if(i.hashesR){if(i.hashesR.length!=t.length)return r(o,"options.hashesR is invalid");l.hashesR=i.hashesR}if(!l.hashesL.length)for(var f=0;f<e.length;f++){var p=a(e[f],i,o);if(!p)return;l.hashesL.push(p)}if(!l.hashesR.length)for(var f=0;f<t.length;f++){var p=a(t[f],i,o);if(!p)return;l.hashesR.push(p)}for(var g=[],v=0;v<l.hashesL.length;v++){l.matches[v]=[];for(var m=0;m<l.hashesR.length;m++){l.hashesL[v].docNum=v,l.hashesR[m].docNum=m,l.matches[v][m]=[];var y=u(l.hashesL[v],l.hashesR[m],i,l);if(y>0)return r(o,"Error "+y+" occurred while comparing Document "+v+" and Document "+m,y);if(i.bBuildReport&&l.i.MatchingWordsPerfect>=i.WordThreshold){l.i.MatchingDocumentPairs++;var b=h(e,t,l.hashesL[v],l.hashesR[m],i,l);b.length&&g.push(b)}}}if(i.bBuildReport&&(l.html=g.join("")),c){var M=l.matches[0][0];l.matches=M}return l.executionTime=Date.now()-s,o(!1,l),!0}var p=this,d=(p.copyfind,{PhraseLength:6,WordThreshold:100,SkipLength:20,MismatchTolerance:2,MismatchPercentage:80,bIgnoreCase:!1,bIgnoreNumbers:!1,bIgnoreOuterPunctuation:!1,bIgnorePunctuation:!1,bSkipLongWords:!1,bSkipNonwords:!1,bBuildReport:!0,bBriefReport:!0}),g=-1,v=0,m=1,y=p.copyfind=f;n.isUndefined(t)?p.copyfind=y:(!n.isUndefined(e)&&e.exports&&(t=e.exports=y),t.copyfind=y)}).call(this)},{"./lib/textreader":1,"./lib/words":2,underscore:"underscore"}],underscore:[function(r,e,t){(function(){function r(r){function e(e,t,n,i,o,a){for(;o>=0&&a>o;o+=r){var u=i?i[o]:o;n=t(n,e[u],u,e)}return n}return function(t,n,i,o){n=k(n,o,4);var a=!S(t)&&M.keys(t),u=(a||t).length,s=r>0?0:u-1;return arguments.length<3&&(i=t[a?a[s]:s],s+=r),e(t,n,i,a,s,u)}}function n(r){return function(e,t,n){t=T(t,n);for(var i=R(e),o=r>0?0:i-1;o>=0&&i>o;o+=r)if(t(e[o],o,e))return o;return-1}}function i(r,e,t){return function(n,i,o){var a=0,u=R(n);if("number"==typeof o)r>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(t&&o&&u)return o=t(n,i),n[o]===i?o:-1;if(i!==i)return o=e(f.call(n,a,u),M.isNaN),o>=0?o+a:-1;for(o=r>0?a:u-1;o>=0&&u>o;o+=r)if(n[o]===i)return o;return-1}}function o(r,e){var t=P.length,n=r.constructor,i=M.isFunction(n)&&n.prototype||c,o="constructor";for(M.has(r,o)&&!M.contains(e,o)&&e.push(o);t--;)o=P[t],o in r&&r[o]!==i[o]&&!M.contains(e,o)&&e.push(o)}var a=this,u=a._,s=Array.prototype,c=Object.prototype,l=Function.prototype,h=s.push,f=s.slice,p=c.toString,d=c.hasOwnProperty,g=Array.isArray,v=Object.keys,m=l.bind,y=Object.create,b=function(){},M=function(r){return r instanceof M?r:this instanceof M?void(this._wrapped=r):new M(r)};"undefined"!=typeof t?("undefined"!=typeof e&&e.exports&&(t=e.exports=M),t._=M):a._=M,M.VERSION="1.8.3";var k=function(r,e,t){if(void 0===e)return r;switch(null==t?3:t){case 1:return function(t){return r.call(e,t)};case 2:return function(t,n){return r.call(e,t,n)};case 3:return function(t,n,i){return r.call(e,t,n,i)};case 4:return function(t,n,i,o){return r.call(e,t,n,i,o)}}return function(){return r.apply(e,arguments)}},T=function(r,e,t){return null==r?M.identity:M.isFunction(r)?k(r,e,t):M.isObject(r)?M.matcher(r):M.property(r)};M.iteratee=function(r,e){return T(r,e,1/0)};var W=function(r,e){return function(t){var n=arguments.length;if(2>n||null==t)return t;for(var i=1;n>i;i++)for(var o=arguments[i],a=r(o),u=a.length,s=0;u>s;s++){var c=a[s];e&&void 0!==t[c]||(t[c]=o[c])}return t}},_=function(r){if(!M.isObject(r))return{};if(y)return y(r);b.prototype=r;var e=new b;return b.prototype=null,e},x=function(r){return function(e){return null==e?void 0:e[r]}},L=Math.pow(2,53)-1,R=x("length"),S=function(r){var e=R(r);return"number"==typeof e&&e>=0&&L>=e};M.each=M.forEach=function(r,e,t){e=k(e,t);var n,i;if(S(r))for(n=0,i=r.length;i>n;n++)e(r[n],n,r);else{var o=M.keys(r);for(n=0,i=o.length;i>n;n++)e(r[o[n]],o[n],r)}return r},M.map=M.collect=function(r,e,t){e=T(e,t);for(var n=!S(r)&&M.keys(r),i=(n||r).length,o=Array(i),a=0;i>a;a++){var u=n?n[a]:a;o[a]=e(r[u],u,r)}return o},M.reduce=M.foldl=M.inject=r(1),M.reduceRight=M.foldr=r(-1),M.find=M.detect=function(r,e,t){var n;return n=S(r)?M.findIndex(r,e,t):M.findKey(r,e,t),void 0!==n&&-1!==n?r[n]:void 0},M.filter=M.select=function(r,e,t){var n=[];return e=T(e,t),M.each(r,function(r,t,i){e(r,t,i)&&n.push(r)}),n},M.reject=function(r,e,t){return M.filter(r,M.negate(T(e)),t)},M.every=M.all=function(r,e,t){e=T(e,t);for(var n=!S(r)&&M.keys(r),i=(n||r).length,o=0;i>o;o++){var a=n?n[o]:o;if(!e(r[a],a,r))return!1}return!0},M.some=M.any=function(r,e,t){e=T(e,t);for(var n=!S(r)&&M.keys(r),i=(n||r).length,o=0;i>o;o++){var a=n?n[o]:o;if(e(r[a],a,r))return!0}return!1},M.contains=M.includes=M.include=function(r,e,t,n){return S(r)||(r=M.values(r)),("number"!=typeof t||n)&&(t=0),M.indexOf(r,e,t)>=0},M.invoke=function(r,e){var t=f.call(arguments,2),n=M.isFunction(e);return M.map(r,function(r){var i=n?e:r[e];return null==i?i:i.apply(r,t)})},M.pluck=function(r,e){return M.map(r,M.property(e))},M.where=function(r,e){return M.filter(r,M.matcher(e))},M.findWhere=function(r,e){return M.find(r,M.matcher(e))},M.max=function(r,e,t){var n,i,o=-(1/0),a=-(1/0);if(null==e&&null!=r){r=S(r)?r:M.values(r);for(var u=0,s=r.length;s>u;u++)n=r[u],n>o&&(o=n)}else e=T(e,t),M.each(r,function(r,t,n){i=e(r,t,n),(i>a||i===-(1/0)&&o===-(1/0))&&(o=r,a=i)});return o},M.min=function(r,e,t){var n,i,o=1/0,a=1/0;if(null==e&&null!=r){r=S(r)?r:M.values(r);for(var u=0,s=r.length;s>u;u++)n=r[u],o>n&&(o=n)}else e=T(e,t),M.each(r,function(r,t,n){i=e(r,t,n),(a>i||i===1/0&&o===1/0)&&(o=r,a=i)});return o},M.shuffle=function(r){for(var e,t=S(r)?r:M.values(r),n=t.length,i=Array(n),o=0;n>o;o++)e=M.random(0,o),e!==o&&(i[o]=i[e]),i[e]=t[o];return i},M.sample=function(r,e,t){return null==e||t?(S(r)||(r=M.values(r)),r[M.random(r.length-1)]):M.shuffle(r).slice(0,Math.max(0,e))},M.sortBy=function(r,e,t){return e=T(e,t),M.pluck(M.map(r,function(r,t,n){return{value:r,index:t,criteria:e(r,t,n)}}).sort(function(r,e){var t=r.criteria,n=e.criteria;if(t!==n){if(t>n||void 0===t)return 1;if(n>t||void 0===n)return-1}return r.index-e.index}),"value")};var w=function(r){return function(e,t,n){var i={};return t=T(t,n),M.each(e,function(n,o){var a=t(n,o,e);r(i,n,a)}),i}};M.groupBy=w(function(r,e,t){M.has(r,t)?r[t].push(e):r[t]=[e]}),M.indexBy=w(function(r,e,t){r[t]=e}),M.countBy=w(function(r,e,t){M.has(r,t)?r[t]++:r[t]=1}),M.toArray=function(r){return r?M.isArray(r)?f.call(r):S(r)?M.map(r,M.identity):M.values(r):[]},M.size=function(r){return null==r?0:S(r)?r.length:M.keys(r).length},M.partition=function(r,e,t){e=T(e,t);var n=[],i=[];return M.each(r,function(r,t,o){(e(r,t,o)?n:i).push(r)}),[n,i]},M.first=M.head=M.take=function(r,e,t){return null!=r?null==e||t?r[0]:M.initial(r,r.length-e):void 0},M.initial=function(r,e,t){return f.call(r,0,Math.max(0,r.length-(null==e||t?1:e)))},M.last=function(r,e,t){return null!=r?null==e||t?r[r.length-1]:M.rest(r,Math.max(0,r.length-e)):void 0},M.rest=M.tail=M.drop=function(r,e,t){return f.call(r,null==e||t?1:e)},M.compact=function(r){return M.filter(r,M.identity)};var j=function(r,e,t,n){for(var i=[],o=0,a=n||0,u=R(r);u>a;a++){var s=r[a];if(S(s)&&(M.isArray(s)||M.isArguments(s))){e||(s=j(s,e,t));var c=0,l=s.length;for(i.length+=l;l>c;)i[o++]=s[c++]}else t||(i[o++]=s)}return i};M.flatten=function(r,e){return j(r,e,!1)},M.without=function(r){return M.difference(r,f.call(arguments,1))},M.uniq=M.unique=function(r,e,t,n){M.isBoolean(e)||(n=t,t=e,e=!1),null!=t&&(t=T(t,n));for(var i=[],o=[],a=0,u=R(r);u>a;a++){var s=r[a],c=t?t(s,a,r):s;e?(a&&o===c||i.push(s),o=c):t?M.contains(o,c)||(o.push(c),i.push(s)):M.contains(i,s)||i.push(s)}return i},M.union=function(){return M.uniq(j(arguments,!0,!0))},M.intersection=function(r){for(var e=[],t=arguments.length,n=0,i=R(r);i>n;n++){var o=r[n];if(!M.contains(e,o)){for(var a=1;t>a&&M.contains(arguments[a],o);a++);a===t&&e.push(o)}}return e},M.difference=function(r){var e=j(arguments,!0,!0,1);return M.filter(r,function(r){return!M.contains(e,r)})},M.zip=function(){return M.unzip(arguments)},M.unzip=function(r){for(var e=r&&M.max(r,R).length||0,t=Array(e),n=0;e>n;n++)t[n]=M.pluck(r,n);return t},M.object=function(r,e){for(var t={},n=0,i=R(r);i>n;n++)e?t[r[n]]=e[n]:t[r[n][0]]=r[n][1];return t},M.findIndex=n(1),M.findLastIndex=n(-1),M.sortedIndex=function(r,e,t,n){t=T(t,n,1);for(var i=t(e),o=0,a=R(r);a>o;){var u=Math.floor((o+a)/2);t(r[u])<i?o=u+1:a=u}return o},M.indexOf=i(1,M.findIndex,M.sortedIndex),M.lastIndexOf=i(-1,M.findLastIndex),M.range=function(r,e,t){null==e&&(e=r||0,r=0),t=t||1;for(var n=Math.max(Math.ceil((e-r)/t),0),i=Array(n),o=0;n>o;o++,r+=t)i[o]=r;return i};var A=function(r,e,t,n,i){if(!(n instanceof e))return r.apply(t,i);var o=_(r.prototype),a=r.apply(o,i);return M.isObject(a)?a:o};M.bind=function(r,e){if(m&&r.bind===m)return m.apply(r,f.call(arguments,1));if(!M.isFunction(r))throw new TypeError("Bind must be called on a function");var t=f.call(arguments,2),n=function(){return A(r,n,e,this,t.concat(f.call(arguments)))};return n},M.partial=function(r){var e=f.call(arguments,1),t=function(){for(var n=0,i=e.length,o=Array(i),a=0;i>a;a++)o[a]=e[a]===M?arguments[n++]:e[a];for(;n<arguments.length;)o.push(arguments[n++]);return A(r,t,this,this,o)};return t},M.bindAll=function(r){var e,t,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)t=arguments[e],r[t]=M.bind(r[t],r);return r},M.memoize=function(r,e){var t=function(n){var i=t.cache,o=""+(e?e.apply(this,arguments):n);return M.has(i,o)||(i[o]=r.apply(this,arguments)),i[o]};return t.cache={},t},M.delay=function(r,e){var t=f.call(arguments,2);return setTimeout(function(){return r.apply(null,t)},e)},M.defer=M.partial(M.delay,M,1),M.throttle=function(r,e,t){var n,i,o,a=null,u=0;t||(t={});var s=function(){u=t.leading===!1?0:M.now(),a=null,o=r.apply(n,i),a||(n=i=null)};return function(){var c=M.now();u||t.leading!==!1||(u=c);var l=e-(c-u);return n=this,i=arguments,0>=l||l>e?(a&&(clearTimeout(a),a=null),u=c,o=r.apply(n,i),a||(n=i=null)):a||t.trailing===!1||(a=setTimeout(s,l)),o}},M.debounce=function(r,e,t){var n,i,o,a,u,s=function(){var c=M.now()-a;e>c&&c>=0?n=setTimeout(s,e-c):(n=null,t||(u=r.apply(o,i),n||(o=i=null)))};return function(){o=this,i=arguments,a=M.now();var c=t&&!n;return n||(n=setTimeout(s,e)),c&&(u=r.apply(o,i),o=i=null),u}},M.wrap=function(r,e){return M.partial(e,r)},M.negate=function(r){return function(){return!r.apply(this,arguments)}},M.compose=function(){var r=arguments,e=r.length-1;return function(){for(var t=e,n=r[e].apply(this,arguments);t--;)n=r[t].call(this,n);return n}},M.after=function(r,e){return function(){return--r<1?e.apply(this,arguments):void 0}},M.before=function(r,e){var t;return function(){return--r>0&&(t=e.apply(this,arguments)),1>=r&&(e=null),t}},M.once=M.partial(M.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];M.keys=function(r){if(!M.isObject(r))return[];if(v)return v(r);var e=[];for(var t in r)M.has(r,t)&&e.push(t);return O&&o(r,e),e},M.allKeys=function(r){if(!M.isObject(r))return[];var e=[];for(var t in r)e.push(t);return O&&o(r,e),e},M.values=function(r){for(var e=M.keys(r),t=e.length,n=Array(t),i=0;t>i;i++)n[i]=r[e[i]];return n},M.mapObject=function(r,e,t){e=T(e,t);for(var n,i=M.keys(r),o=i.length,a={},u=0;o>u;u++)n=i[u],a[n]=e(r[n],n,r);return a},M.pairs=function(r){for(var e=M.keys(r),t=e.length,n=Array(t),i=0;t>i;i++)n[i]=[e[i],r[e[i]]];return n},M.invert=function(r){for(var e={},t=M.keys(r),n=0,i=t.length;i>n;n++)e[r[t[n]]]=t[n];return e},M.functions=M.methods=function(r){var e=[];for(var t in r)M.isFunction(r[t])&&e.push(t);return e.sort()},M.extend=W(M.allKeys),M.extendOwn=M.assign=W(M.keys),M.findKey=function(r,e,t){e=T(e,t);for(var n,i=M.keys(r),o=0,a=i.length;a>o;o++)if(n=i[o],e(r[n],n,r))return n},M.pick=function(r,e,t){var n,i,o={},a=r;if(null==a)return o;M.isFunction(e)?(i=M.allKeys(a),n=k(e,t)):(i=j(arguments,!1,!1,1),n=function(r,e,t){return e in t},a=Object(a));for(var u=0,s=i.length;s>u;u++){var c=i[u],l=a[c];n(l,c,a)&&(o[c]=l)}return o},M.omit=function(r,e,t){if(M.isFunction(e))e=M.negate(e);else{var n=M.map(j(arguments,!1,!1,1),String);e=function(r,e){return!M.contains(n,e)}}return M.pick(r,e,t)},M.defaults=W(M.allKeys,!0),M.create=function(r,e){var t=_(r);return e&&M.extendOwn(t,e),t},M.clone=function(r){return M.isObject(r)?M.isArray(r)?r.slice():M.extend({},r):r},M.tap=function(r,e){return e(r),r},M.isMatch=function(r,e){var t=M.keys(e),n=t.length;if(null==r)return!n;for(var i=Object(r),o=0;n>o;o++){var a=t[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var N=function(r,e,t,n){if(r===e)return 0!==r||1/r===1/e;if(null==r||null==e)return r===e;r instanceof M&&(r=r._wrapped),e instanceof M&&(e=e._wrapped);var i=p.call(r);if(i!==p.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!==+r?+e!==+e:0===+r?1/+r===1/e:+r===+e;case"[object Date]":case"[object Boolean]":return+r===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof r||"object"!=typeof e)return!1;var a=r.constructor,u=e.constructor;if(a!==u&&!(M.isFunction(a)&&a instanceof a&&M.isFunction(u)&&u instanceof u)&&"constructor"in r&&"constructor"in e)return!1}t=t||[],n=n||[];for(var s=t.length;s--;)if(t[s]===r)return n[s]===e;if(t.push(r),n.push(e),o){if(s=r.length,s!==e.length)return!1;for(;s--;)if(!N(r[s],e[s],t,n))return!1}else{var c,l=M.keys(r);if(s=l.length,M.keys(e).length!==s)return!1;for(;s--;)if(c=l[s],!M.has(e,c)||!N(r[c],e[c],t,n))return!1}return t.pop(),n.pop(),!0};M.isEqual=function(r,e){return N(r,e)},M.isEmpty=function(r){return null==r?!0:S(r)&&(M.isArray(r)||M.isString(r)||M.isArguments(r))?0===r.length:0===M.keys(r).length},M.isElement=function(r){return!(!r||1!==r.nodeType)},M.isArray=g||function(r){return"[object Array]"===p.call(r)},M.isObject=function(r){var e=typeof r;return"function"===e||"object"===e&&!!r},M.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(r){M["is"+r]=function(e){return p.call(e)==="[object "+r+"]"}}),M.isArguments(arguments)||(M.isArguments=function(r){return M.has(r,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(M.isFunction=function(r){return"function"==typeof r||!1}),M.isFinite=function(r){return isFinite(r)&&!isNaN(parseFloat(r))},M.isNaN=function(r){return M.isNumber(r)&&r!==+r},M.isBoolean=function(r){return r===!0||r===!1||"[object Boolean]"===p.call(r)},M.isNull=function(r){return null===r},M.isUndefined=function(r){return void 0===r},M.has=function(r,e){return null!=r&&d.call(r,e)},M.noConflict=function(){return a._=u,this},M.identity=function(r){return r},M.constant=function(r){return function(){return r}},M.noop=function(){},M.property=x,M.propertyOf=function(r){return null==r?function(){}:function(e){return r[e]}},M.matcher=M.matches=function(r){return r=M.extendOwn({},r),function(e){return M.isMatch(e,r)}},M.times=function(r,e,t){var n=Array(Math.max(0,r));e=k(e,t,1);for(var i=0;r>i;i++)n[i]=e(i);return n},M.random=function(r,e){return null==e&&(e=r,r=0),r+Math.floor(Math.random()*(e-r+1))},M.now=Date.now||function(){return(new Date).getTime()};var C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=M.invert(C),D=function(r){var e=function(e){return r[e]},t="(?:"+M.keys(r).join("|")+")",n=RegExp(t),i=RegExp(t,"g");return function(r){return r=null==r?"":""+r,n.test(r)?r.replace(i,e):r}};M.escape=D(C),M.unescape=D(E),M.result=function(r,e,t){var n=null==r?void 0:r[e];return void 0===n&&(n=t),M.isFunction(n)?n.call(r):n};var F=0;M.uniqueId=function(r){var e=++F+"";return r?r+e:e},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,q=function(r){return"\\"+H[r]};M.template=function(r,e,t){!e&&t&&(e=t),e=M.defaults({},e,M.templateSettings);var n=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),i=0,o="__p+='";r.replace(n,function(e,t,n,a,u){return o+=r.slice(i,u).replace(B,q),i=u+e.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(u){throw u.source=o,u}var s=function(r){return a.call(this,r,M)},c=e.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s},M.chain=function(r){var e=M(r);return e._chain=!0,e};var U=function(r,e){return r._chain?M(e).chain():e};M.mixin=function(r){M.each(M.functions(r),function(e){var t=M[e]=r[e];M.prototype[e]=function(){var r=[this._wrapped];return h.apply(r,arguments),U(this,t.apply(M,r))}})},M.mixin(M),M.each(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var e=s[r];M.prototype[r]=function(){var t=this._wrapped;return e.apply(t,arguments),"shift"!==r&&"splice"!==r||0!==t.length||delete t[0],U(this,t)}}),M.each(["concat","join","slice"],function(r){var e=s[r];M.prototype[r]=function(){return U(this,e.apply(this._wrapped,arguments))}}),M.prototype.value=function(){return this._wrapped},M.prototype.valueOf=M.prototype.toJSON=M.prototype.value,M.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return M})}).call(this)},{}]},{},[]);
