/**
 * Copyright (c) 2016 Craig Monro (kodespace.com)
 * No part of this file may be copied or retransmitted without adhering to the GPL license.
 * This copyright notice may not be removed, without express permission of the copyright holder.
 * https://github.com/cmroanirgo/pl-copyfind/blob/master/LICENSE.md
 */
require=function r(t,e,n){function i(a,u){if(!e[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[a]={exports:{}};t[a][0].call(l.exports,function(r){var e=t[a][1][r];return i(e?e:r)},l,l.exports,r,t,e,n)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(r,t,e){var n={isString:function(r){return"string"==typeof r},isUndefined:function(r){return"undefined"==typeof r},isDefined:function(r){return!_isUndefined(r)},isBool:function(r){return"boolean"==typeof r},isString:function(r){return"string"==typeof r},isObject:function(r){return null!==r&&"object"==typeof r},isFunction:function(r){return"function"==typeof r},isArray:Array.isArray||function(r){return"[object Array]"===toString.call(r)},isEmpty:function(r){return n.isString(r)&&!r.length},forEach:function(r,t){return Array.prototype.forEach.call(r,t)},toRealArray:function(r){if(n.isArray(r))return r;for(var t=[],e=0;e<r.length;e++)t.push(r[e]);return t},extend:function(){for(var r=arguments[0],t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},htmlEncode:function(r){return r.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;")},min:function(r,t){return t>r?r:t},max:function(r,t){return r>=t?r:t},dump:function(r){var t=[];return JSON.stringify(r,function(r,e){if("object"==typeof e&&null!==e){if(-1!==t.indexOf(e))return;t.push(e)}return"parent"==r?"[parent]":e},4)}};t.exports=n},{}],2:[function(r,t,e){"use strict";var n=r("./not_");(function(){function r(r){return/[ \f\n\r\t\v\u00A0\u2028\u2029]/.test(r)}function i(r){return r=r.charCodeAt(0),r>0&&31>r||255==r||127==r}var o=this,a=(o.TextReader,0),u=1,s=2,c=3,l=o.TextReader=function(r){this._text=r,this._textpos=0,this._gotWord=!1,this._gotDelimiter=!1,this._gotChar=!1,this._char="",this._delimiterType=a};l.prototype.constructor=l,l.prototype.isFinished=function(){return this._delimiterType==c},l.prototype.getCharTxt=function(){return this._textpos<this._text.length?this._text.charAt(this._textpos++):-1},l.prototype.getPos=function(){var r=this._textpos;return this._gotChar&&r--,r},l.prototype.getWord=function(){var t=[];for(this._gotWord=!1,this._gotDelimiter=!1,this._delimiterType=a;;){if(this._gotChar?this._gotChar=!1:this._char=this.getCharTxt(),this._char<0){this._delimiterType=c;var e=t.join("");return e}if("\n"==this._char||"\r"==this._char)this._delimiterType=s,this._gotDelimiter=!0;else if(r(this._char))u>this._delimiterType&&(this._delimiterType=u),this._gotDelimiter=!0;else{if(i(this._char))continue;if(this._gotDelimiter){if(this._gotWord){this._gotChar=!0;var e=t.join("");return e}this._delimiterType=a,this._gotDelimiter=!1,this._gotChar=!0}else t.length<255&&(t.push(this._char),this._gotWord=!0)}}return""},n.isUndefined(e)?o.TextReader=l:(!n.isUndefined(t)&&t.exports&&(e=t.exports=l),e.TextReader=l)}).call(this)},{"./not_":1}],3:[function(r,t,e){"use strict";var n=r("./not_");(function(){function r(r){return r=r.charCodeAt(0),r>=33&&47>=r||r>=58&&64>=r||r>=91&&96>=r||r>=127}function i(r){return/[0-9]/.test(r)}function o(r){return/[a-zA-Z]/.test(r)}var a=this,u=(a.words,{removePunct:function(t){for(var e=[],n=0;n<t.length;n++){var i=t.charAt(n);r(i)||e.push(i)}return e.join("")},outerPunct:function(t){for(var e=0,n=t.length-1,i=0;i<t.length;i++){var o=t.charAt(i);if(!r(o))break;e=i}for(var i=t.length-1;i>e;i--){var o=t.charAt(i);if(!r(o))break;n=i-1}return e>n?"":t.substr(e,n-e+1)},removeNumbers:function(r){for(var t=[],e=0;e<r.length;e++){var n=r.charAt(e);i(n)||t.push(n)}return t.join("")},toLowerCase:function(r){return r.toLowerCase()},isWord:function(r){var t=r.length;if(1>t)return!1;if(!o(r.charAt(0)))return!1;if(!o(r.charAt(t-1)))return!1;for(var e=1;t-2>e;e++){var n=r.charAt(e);if(!o(n)&&"-"!=n&&"'"!=n)return!1}return!0},hash:function(r){var t,e=0;if(0==r.length)return 1;for(var n=0;n<r.length;n++)t=r.charCodeAt(n),e=(e<<7|e>>>25)^t,e>>>=0;return e}}),s=a.words=u;n.isUndefined(e)?a.words=s:(!n.isUndefined(t)&&t.exports&&(e=t.exports=s),e.words=s)}).call(this)},{"./not_":1}],demo:[function(r,t,e){function n(r,t){if(!r)throw"Blob object is required.";r.type||(r.type="text/html");var e=r.type.split("/")[1];if(t&&-1!==t.indexOf(".")){var n=t.split(".");t=n[0],e=n[1]}var i=(t||Math.round(9999999999*Math.random())+888888888)+"."+e;if("undefined"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(r,i);if("undefined"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(r,i);var o=document.createElement("a");o.href=URL.createObjectURL(r),o.target="_blank",o.download=i,navigator.mozGetUserMedia&&(o.onclick=function(){(document.body||document.documentElement).removeChild(o)},(document.body||document.documentElement).appendChild(o));var a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});o.dispatchEvent(a),navigator.mozGetUserMedia||URL.revokeObjectURL(o.href)}function i(r,t){r.match("^http")||(r="http://"+r),console.log("fetching yql request for: "+r),$.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22"+encodeURIComponent(r)+"%22&format=xml'&callback=?",function(r){r.results[0]?(console.log("got yql '"+(r.results[0]+"").slice(0,"20")+"'..."),t(!1,r.results[0])):t({message:"Error: could not load the page."})})}function o(r){r=r.replace(/\r/g,"").replace(/\t{2,}/g,"	").replace(/\s+\n/g,"\n").replace(/\n{3,}/g,"\n\n"),r=r.replace(/<\!DOCTYPE [^>]*?>/g,""),r=r.replace(/<!--[\s\S]*?-->/g,""),r=r.replace(/<\!\[CDATA\[([\s\S]*?)\]\]/g,"$1"),r=r.replace(/<([a-zA-Z]+) [^>]*?\/>/gi,"<$1/>"),r=r.replace(/<([a-zA-Z]+) [^>]*?>/gi,"<$1>"),r=r.replace(/<head[\s\S]*?<\/head>/gi,""),r=r.replace(/<body>/gi,"").replace(/<\/body>/gi,"").replace(/<html>/gi,"").replace(/<\/html>/gi,""),r=r.replace(/<script[^>]*?\/>/gi," "),r=r.replace(/<script[\s\S]*?<\/script>/gi," "),r=r.replace(/<noscript[\s\S]*?<\/noscript>/gi,""),r=r.replace(/<canvas[\s\S]*?<\/canvas>/gi," "),r=r.replace(/<style[\s\S]*?<\/style>/gi," "),r=r.replace(/<footer[\s\S]*?<\/footer>/gi," ").replace(/<nav[\s\S]*?<\/nav>/gi," ").replace(/<header[\s\S]*?<\/header>/gi," ").replace(/<figure[\s\S]*?<\/figure>/gi," ");var t=$("<div>"+r+"</div>");return r=t.text().replace(/\r/g,"").replace(/\s+\n/g,"\n").replace(/ {2,}/g," ").replace(/\n{3,}/g,"\n\n").replace(/\t{2,}/g,"	").trim()}var a={invokeSaveAsDialog:n,fetchUrl:i,stripHtml:o};t&&(t.exports=a)},{}],metadata:[function(r,t,e){t.exports={author:{name:"Craig Monro"},name:"pl-copyfind",version:"0.10.1",description:"ideas are based on those found at plagiarism.bloomfieldmedia.com's CopyFind/WCopyFind",main:"index.js",repository:{type:"git",url:"https://github.com/cmroanirgo/pl-copyfind.git"},directories:{lib:"./lib"},dependencies:{},scripts:{"build:base":"browserify -r ./package.json:metadata -r underscore -r ./index.js:pl-copyfind -r ./demos/demo.js:demo","build:debug":"echo building debug... && npm run build:base -s > demos/node-bundle.js","build:release":'echo building release... && npm run build:base -s | uglifyjs --c --m --preamble "/**\n * Copyright (c) 2016 Craig Monro (kodespace.com)\n * No part of this file may be copied or retransmitted without adhering to the GPL license.\n * This copyright notice may not be removed, without express permission of the copyright holder.\n * https://github.com/cmroanirgo/pl-copyfind/blob/master/LICENSE.md\n */"> demos/node-bundle.js',build:"npm run build:release -s"},license:"GPL"}},{}],"pl-copyfind":[function(r,t,e){"use strict";var n=r("./lib/not_"),i=r("./lib/words"),o=r("./lib/textreader");(function(){function r(r,t,e){var n={message:t};return r(n),!1}function a(r,t,e){for(var n=new o(r),a=[],u=[];!n.isFinished();){var s=n.getPos(),c=n.getWord();t.bIgnorePunctuation&&(c=i.removePunct(c)),t.bIgnoreOuterPunctuation&&(c=i.outerPunct(c)),t.bIgnoreNumbers&&(c=i.removeNumbers(c)),t.bIgnoreCase&&(c=c.toLowerCase(c)),t.bSkipLongWords&&c.length>t.SkipLength||t.bSkipNonwords&&!i.isWord(c)||(u.push(s),a.push(i.hash(c)))}var l=a.length,h={};h.WordsTotal=l,h.WordHash=a,h.WordPos=u,h.SortedWords=[],h.DocLength=r.length;for(var f=0;l>f;f++)h.SortedWords.push({number:f,hash:a[f]});if(h.SortedWords.sort(function(r,t){return r.hash-t.hash}),1==t.PhraseLength)h.FirstHash=0;else{for(var p=0,f=0;l>f;f++)if(0!=(4290772992&h.SortedWords[f].hash)){p=f;break}h.FirstHash=p}return h}function u(r,t,e,n){function i(r,t,e,n,i){return 200*i/(e-r+n-t+2)}var o,a,u,s,c,l,h,f,p,d,g,v,m,k,_,x,T,W,S,L,R,w,A;n.i={MatchMarkL:[],MatchMarkR:[],MatchAnchorL:[],MatchAnchorR:[],MatchMarkTempL:[],MatchMarkTempR:[],MatchingDocumentPairs:0,MatchingWordsPerfect:0,MatchingWordsTotalL:0,MatchingWordsTotalR:0};var j=[];for(o=0;o<r.WordsTotal;o++)n.i.MatchMarkL[o]=y,n.i.MatchAnchorL[o]=0;for(a=0;a<t.WordsTotal;a++)n.i.MatchMarkR[a]=y,n.i.MatchAnchorR[a]=0;for(o=r.FirstHash,a=t.FirstHash,w=0;o<r.WordsTotal&&a<t.WordsTotal;)if(n.i.MatchMarkL[r.SortedWords[o].number]==y)if(n.i.MatchMarkR[t.SortedWords[a].number]==y)if(r.SortedWords[o].hash<t.SortedWords[a].hash){if(o++,o>=r.WordsTotal)break}else if(r.SortedWords[o].hash>t.SortedWords[a].hash){if(a++,a>=t.WordsTotal)break}else{for(L=r.SortedWords[o].hash,u=o,s=a;u<r.WordsTotal-1&&r.SortedWords[u+1].hash==L;)u++;for(;s<t.WordsTotal-1&&t.SortedWords[s+1].hash==L;)s++;for(c=o;u>=c;c++)if(n.i.MatchMarkL[r.SortedWords[c].number]==y)for(l=a;s>=l;l++)if(n.i.MatchMarkR[t.SortedWords[l].number]==y){for(n.i.MatchMarkTempL[r.SortedWords[c].number]=b,n.i.MatchMarkTempR[t.SortedWords[l].number]=b,h=r.SortedWords[c].number-1,p=r.SortedWords[c].number+1,f=t.SortedWords[l].number-1,d=t.SortedWords[l].number+1;h>=0&&f>=0&&n.i.MatchMarkL[h]==y&&n.i.MatchMarkR[f]==y&&r.WordHash[h]==t.WordHash[f];)n.i.MatchMarkTempL[h]=b,n.i.MatchMarkTempR[f]=b,h--,f--;for(;p<r.WordsTotal&&d<t.WordsTotal&&n.i.MatchMarkL[p]==y&&n.i.MatchMarkR[d]==y&&r.WordHash[p]==t.WordHash[d];)n.i.MatchMarkTempL[p]=b,n.i.MatchMarkTempR[d]=b,p++,d++;if(g=h+1,v=f+1,m=p-1,k=d-1,R=m-g+1,e.MismatchTolerance>0){for(_=g,x=v,T=m,W=k,S=0;h>=0&&f>=0&&n.i.MatchMarkL[h]==y&&n.i.MatchMarkR[f]==y;)if(r.WordHash[h]!=t.WordHash[f]){if(S++,S>e.MismatchTolerance)break;if(h-1>=0){if(n.i.MatchMarkL[h-1]!=y)break;if(r.WordHash[h-1]==t.WordHash[f]){if(i(h-1,f,T,W,R+1)<e.MismatchPercentage)break;n.i.MatchMarkTempL[h]=M,h--,R++,S=0,n.i.MatchMarkTempL[h]=b,n.i.MatchMarkTempR[f]=b,g=h,v=f,h--,f--;continue}}if(f-1>=0){if(n.i.MatchMarkR[f-1]!=y)break;if(r.WordHash[h]==t.WordHash[f-1]){if(i(h,f-1,T,W,R+1)<e.MismatchPercentage)break;n.i.MatchMarkTempR[f]=M,f--,R++,S=0,n.i.MatchMarkTempL[h]=b,n.i.MatchMarkTempR[f]=b,g=h,v=f,h--,f--;continue}}if(i(h-1,f-1,T,W,R)<e.MismatchPercentage)break;n.i.MatchMarkTempL[h]=M,n.i.MatchMarkTempR[f]=M,h--,f--}else R++,S=0,n.i.MatchMarkTempL[h]=b,n.i.MatchMarkTempR[f]=b,g=h,v=f,h--,f--;for(S=0;p<r.WordsTotal&&d<t.WordsTotal&&n.i.MatchMarkL[p]==y&&n.i.MatchMarkR[d]==y;)if(r.WordHash[p]!=t.WordHash[d]){if(S++,S==e.MismatchTolerance)break;if(p+1<r.WordsTotal){if(n.i.MatchMarkL[p+1]!=y)break;if(r.WordHash[p+1]==t.WordHash[d]){if(i(_,x,p+1,d,R+1)<e.MismatchPercentage)break;n.i.MatchMarkTempL[p]=M,p++,R++,S=0,n.i.MatchMarkTempL[p]=b,n.i.MatchMarkTempR[d]=b,m=p,k=d,p++,d++;continue}}if(d+1<t.WordsTotal){if(n.i.MatchMarkR[d+1]!=y)break;if(r.WordHash[p]==t.WordHash[d+1]){if(i(_,x,p,d+1,R+1)<e.MismatchPercentage)break;n.i.MatchMarkTempR[d]=M,d++,R++,S=0,n.i.MatchMarkTempL[p]=b,n.i.MatchMarkTempR[d]=b,m=p,k=d,p++,d++;continue}}if(i(_,x,p+1,d+1,R)<e.MismatchPercentage)break;n.i.MatchMarkTempL[p]=M,n.i.MatchMarkTempR[d]=M,p++,d++}else R++,S=0,n.i.MatchMarkTempL[p]=b,n.i.MatchMarkTempR[d]=b,m=p,k=d,p++,d++}if(R>=e.PhraseLength){w++;var O=function(r,t,e){var n,i=r.WordPos[t];return n=e==r.WordPos.length-1?r.DocLength:r.WordPos[e+1],n-i},P=[],N=[];for(A=g;m>=A;A++)n.i.MatchMarkL[A]=n.i.MatchMarkTempL[A],n.i.MatchMarkTempL[A]==b?n.i.MatchingWordsPerfect++:P.push({pos:r.WordPos[A],length:O(r,A,A)}),n.i.MatchAnchorL[A]=w;for(n.i.MatchingWordsTotalL+=m-g+1,A=v;k>=A;A++)n.i.MatchMarkR[A]=n.i.MatchMarkTempR[A],n.i.MatchAnchorR[A]=w,n.i.MatchMarkTempR[A]!=b&&N.push({pos:t.WordPos[A],length:O(t,A,A)});n.i.MatchingWordsTotalR+=k-v+1;var C={textL:{pos:r.WordPos[g],length:O(r,g,m),wordCount:m-g+1,skipped:P},textR:{pos:t.WordPos[v],length:O(t,v,k),wordCount:k-v+1,skipped:N}};j.push(C)}}o=u+1,a=s+1}else a++;else o++;return n.matches[r.docNum][t.docNum]=j,-1}function s(r,t){if(!r)throw"ASSERTION! "+t}function c(r){var t=r.lastIndexOf("\n\n");return t>0?r.slice(t+2):r}function l(r){var t=r.indexOf("\n\n");return t>0?r.slice(0,t):r}function h(r,t,e,n){return t>0?1==t?"":e?t<r.length+3?"..."+c(r.slice(-t)):r:n?t<r.length+3?l(r.slice(0,t))+"...":r:r.length<2*t?r:l(r.slice(0,t))+"...\n\n\n..."+c(r.slice(-t)):r}function f(r,t){if(t>1&&r.length>3*t){var e=r.slice(0,t),i=r.slice(-t);return n.escape(e)+"<span class='match-removed'>[ long matching section removed ]</span>"+n.escape(i)}return n.escape(r)}function p(r,t,e,i,o,a){if(!o.length)return"";for(var u=[],c=0;c<o.length;c++){var l=o[c]["text"+e];l.num=c+1,u.push(l)}u.sort(function(r,t){return r.pos-t.pos});for(var p=a.bBriefReport?a.bTerseReport?1:3*a.PhraseLength*5:0,d=3*a.PhraseLength*5*2,g=[],v=0,c=0;c<u.length;c++){var m=u[c];s(m.pos>=v,"sorted matches are out of order"),s(m.length>0,"matches' length is invalid");var y,b=n.escape(h(r.slice(v,m.pos),p,0==v,!1));if(m.skipped&&0!=m.skipped.length){y=[],v=m.pos;for(var M=0;M<m.skipped.length;M++){var k=m.skipped[M];s(k.pos>=v,"skipped matches are out of order"),s(k.pos>=m.pos&&k.pos+k.length<=m.pos+m.length,"sorted matches are outside expected range");var _=f(r.slice(v,k.pos),d),x='</span><span class="match-partial">'+n.escape(r.slice(k.pos,k.pos+k.length))+'</span><span class="match">';v=k.pos+k.length,y.push(_+x)}v<m.pos+m.length&&y.push(f(r.slice(v,m.pos+m.length),d)),y='<span class="match">'+y.join("")+"</span>",y=y.split('<span class="match"></span>').join("")}else y='<span class="match">'+f(r.slice(m.pos,m.pos+m.length),d)+"</span>";y='<a href="#'+t+i+m.num+'" id="'+t+e+m.num+'" data-match="'+m.num+'">'+y+"</a>",g.push(b+y),v=m.pos+m.length}return v<r.length&&g.push(n.escape(h(r.slice(v),p,!1,!0))),g=g.join("").split("\n").join("\n<br>\n"),'\n\n<div class="doc" id="'+t+e+'">\n'+g+"</div>"}function d(r,t,e,n,i,o){var a="doc";(r.length>1||t.length>1)&&(a+=e.docNum+""+n.docNum);var u=o.matches[e.docNum][n.docNum];if(0==u.length)return"";for(var s=0,c=0;c<u.length;c++){var l=u[c].textL;s+=l.wordCount}var h=p(r[e.docNum],a,"L","R",u,i),f=p(t[n.docNum],a,"R","L",u,i),d="";return(r.length>1||t.length>1)&&(d+="\n\n<div class='doc-container'><h2>Comparison results of #"+e.docNum+" and #"+n.docNum+"</h2>\n"),d+="<div class='stats'>"+s+" Words in "+u.length+" incidents</div>\n",d+=h+f+"\n",(r.length>1||t.length>1)&&(d+="</div>"),d}function g(t,e,i,o){Date.now||(Date.now=function(){return(new Date).getTime()});var s=Date.now();n.isFunction(i)&&(o=i,i={}),i=n.extend({},m,i);var c=n.isString(t)&&n.isString(e);if(n.isString(t)&&(t=[t]),n.isString(e)&&(e=[e]),!n.isArray(t)||0==t.length||!n.isString(t[0]))return r(o,"'Left' source text must be a string or an array of strings.");if(!n.isArray(e)||0==e.length||!n.isString(e[0]))return r(o,"'Right' source text must be a string or an array of strings.");var l={matches:[],hashesL:[],hashesR:[]};if(i.hashesL){if(i.hashesL.length!=t.length)return r(o,"options.hashesL is invalid");l.hashesL=i.hashesL}if(i.hashesR){if(i.hashesR.length!=e.length)return r(o,"options.hashesR is invalid");l.hashesR=i.hashesR}if(!l.hashesL.length)for(var h=0;h<t.length;h++){var f=a(t[h],i,o);if(!f)return;l.hashesL.push(f)}if(!l.hashesR.length)for(var h=0;h<e.length;h++){var f=a(e[h],i,o);if(!f)return;l.hashesR.push(f)}for(var p=[],g=0;g<l.hashesL.length;g++){l.matches[g]=[];for(var v=0;v<l.hashesR.length;v++){l.hashesL[g].docNum=g,l.hashesR[v].docNum=v,l.matches[g][v]=[];var y=u(l.hashesL[g],l.hashesR[v],i,l);if(y>0)return r(o,"Error "+y+" occurred while comparing Document "+g+" and Document "+v,y);if(i.bBuildReport&&l.i.MatchingWordsPerfect>=i.WordThreshold){l.i.MatchingDocumentPairs++;var b=d(t,e,l.hashesL[g],l.hashesR[v],i,l);b.length&&p.push(b)}}}if(i.bBuildReport&&(l.html=p.join("")),c){var M=l.matches[0][0];l.matches=M}return l.executionTime=Date.now()-s,o(!1,l),!0}n.escape=n.htmlEncode;var v=this,m=(v.copyfind,{PhraseLength:6,WordThreshold:100,SkipLength:20,MismatchTolerance:2,MismatchPercentage:80,bIgnoreCase:!1,bIgnoreNumbers:!1,bIgnoreOuterPunctuation:!1,bIgnorePunctuation:!1,bSkipLongWords:!1,bSkipNonwords:!1,bBuildReport:!0,bBriefReport:!0}),y=-1,b=0,M=1,k=v.copyfind=g;n.isUndefined(e)?v.copyfind=k:(!n.isUndefined(t)&&t.exports&&(e=t.exports=k),e.copyfind=k)}).call(this)},{"./lib/not_":1,"./lib/textreader":2,"./lib/words":3}],underscore:[function(r,t,e){(function(){function r(r){function t(t,e,n,i,o,a){for(;o>=0&&a>o;o+=r){var u=i?i[o]:o;n=e(n,t[u],u,t)}return n}return function(e,n,i,o){n=k(n,o,4);var a=!R(e)&&M.keys(e),u=(a||e).length,s=r>0?0:u-1;return arguments.length<3&&(i=e[a?a[s]:s],s+=r),t(e,n,i,a,s,u)}}function n(r){return function(t,e,n){e=_(e,n);for(var i=L(t),o=r>0?0:i-1;o>=0&&i>o;o+=r)if(e(t[o],o,t))return o;return-1}}function i(r,t,e){return function(n,i,o){var a=0,u=L(n);if("number"==typeof o)r>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(e&&o&&u)return o=e(n,i),n[o]===i?o:-1;if(i!==i)return o=t(f.call(n,a,u),M.isNaN),o>=0?o+a:-1;for(o=r>0?a:u-1;o>=0&&u>o;o+=r)if(n[o]===i)return o;return-1}}function o(r,t){var e=P.length,n=r.constructor,i=M.isFunction(n)&&n.prototype||c,o="constructor";for(M.has(r,o)&&!M.contains(t,o)&&t.push(o);e--;)o=P[e],o in r&&r[o]!==i[o]&&!M.contains(t,o)&&t.push(o)}var a=this,u=a._,s=Array.prototype,c=Object.prototype,l=Function.prototype,h=s.push,f=s.slice,p=c.toString,d=c.hasOwnProperty,g=Array.isArray,v=Object.keys,m=l.bind,y=Object.create,b=function(){},M=function(r){return r instanceof M?r:this instanceof M?void(this._wrapped=r):new M(r)};"undefined"!=typeof e?("undefined"!=typeof t&&t.exports&&(e=t.exports=M),e._=M):a._=M,M.VERSION="1.8.3";var k=function(r,t,e){if(void 0===t)return r;switch(null==e?3:e){case 1:return function(e){return r.call(t,e)};case 2:return function(e,n){return r.call(t,e,n)};case 3:return function(e,n,i){return r.call(t,e,n,i)};case 4:return function(e,n,i,o){return r.call(t,e,n,i,o)}}return function(){return r.apply(t,arguments)}},_=function(r,t,e){return null==r?M.identity:M.isFunction(r)?k(r,t,e):M.isObject(r)?M.matcher(r):M.property(r)};M.iteratee=function(r,t){return _(r,t,1/0)};var x=function(r,t){return function(e){var n=arguments.length;if(2>n||null==e)return e;for(var i=1;n>i;i++)for(var o=arguments[i],a=r(o),u=a.length,s=0;u>s;s++){var c=a[s];t&&void 0!==e[c]||(e[c]=o[c])}return e}},T=function(r){if(!M.isObject(r))return{};if(y)return y(r);b.prototype=r;var t=new b;return b.prototype=null,t},W=function(r){return function(t){return null==t?void 0:t[r]}},S=Math.pow(2,53)-1,L=W("length"),R=function(r){var t=L(r);return"number"==typeof t&&t>=0&&S>=t};M.each=M.forEach=function(r,t,e){t=k(t,e);var n,i;if(R(r))for(n=0,i=r.length;i>n;n++)t(r[n],n,r);else{var o=M.keys(r);for(n=0,i=o.length;i>n;n++)t(r[o[n]],o[n],r)}return r},M.map=M.collect=function(r,t,e){t=_(t,e);for(var n=!R(r)&&M.keys(r),i=(n||r).length,o=Array(i),a=0;i>a;a++){var u=n?n[a]:a;o[a]=t(r[u],u,r)}return o},M.reduce=M.foldl=M.inject=r(1),M.reduceRight=M.foldr=r(-1),M.find=M.detect=function(r,t,e){var n;return n=R(r)?M.findIndex(r,t,e):M.findKey(r,t,e),void 0!==n&&-1!==n?r[n]:void 0},M.filter=M.select=function(r,t,e){var n=[];return t=_(t,e),M.each(r,function(r,e,i){t(r,e,i)&&n.push(r)}),n},M.reject=function(r,t,e){return M.filter(r,M.negate(_(t)),e)},M.every=M.all=function(r,t,e){t=_(t,e);for(var n=!R(r)&&M.keys(r),i=(n||r).length,o=0;i>o;o++){var a=n?n[o]:o;if(!t(r[a],a,r))return!1}return!0},M.some=M.any=function(r,t,e){t=_(t,e);for(var n=!R(r)&&M.keys(r),i=(n||r).length,o=0;i>o;o++){var a=n?n[o]:o;if(t(r[a],a,r))return!0}return!1},M.contains=M.includes=M.include=function(r,t,e,n){return R(r)||(r=M.values(r)),("number"!=typeof e||n)&&(e=0),M.indexOf(r,t,e)>=0},M.invoke=function(r,t){var e=f.call(arguments,2),n=M.isFunction(t);return M.map(r,function(r){var i=n?t:r[t];return null==i?i:i.apply(r,e)})},M.pluck=function(r,t){return M.map(r,M.property(t))},M.where=function(r,t){return M.filter(r,M.matcher(t))},M.findWhere=function(r,t){return M.find(r,M.matcher(t))},M.max=function(r,t,e){var n,i,o=-(1/0),a=-(1/0);if(null==t&&null!=r){r=R(r)?r:M.values(r);for(var u=0,s=r.length;s>u;u++)n=r[u],n>o&&(o=n)}else t=_(t,e),M.each(r,function(r,e,n){i=t(r,e,n),(i>a||i===-(1/0)&&o===-(1/0))&&(o=r,a=i)});return o},M.min=function(r,t,e){var n,i,o=1/0,a=1/0;if(null==t&&null!=r){r=R(r)?r:M.values(r);for(var u=0,s=r.length;s>u;u++)n=r[u],o>n&&(o=n)}else t=_(t,e),M.each(r,function(r,e,n){i=t(r,e,n),(a>i||i===1/0&&o===1/0)&&(o=r,a=i)});return o},M.shuffle=function(r){for(var t,e=R(r)?r:M.values(r),n=e.length,i=Array(n),o=0;n>o;o++)t=M.random(0,o),t!==o&&(i[o]=i[t]),i[t]=e[o];return i},M.sample=function(r,t,e){return null==t||e?(R(r)||(r=M.values(r)),r[M.random(r.length-1)]):M.shuffle(r).slice(0,Math.max(0,t))},M.sortBy=function(r,t,e){return t=_(t,e),M.pluck(M.map(r,function(r,e,n){return{value:r,index:e,criteria:t(r,e,n)}}).sort(function(r,t){var e=r.criteria,n=t.criteria;if(e!==n){if(e>n||void 0===e)return 1;if(n>e||void 0===n)return-1}return r.index-t.index}),"value")};var w=function(r){return function(t,e,n){var i={};return e=_(e,n),M.each(t,function(n,o){var a=e(n,o,t);r(i,n,a)}),i}};M.groupBy=w(function(r,t,e){M.has(r,e)?r[e].push(t):r[e]=[t]}),M.indexBy=w(function(r,t,e){r[e]=t}),M.countBy=w(function(r,t,e){M.has(r,e)?r[e]++:r[e]=1}),M.toArray=function(r){return r?M.isArray(r)?f.call(r):R(r)?M.map(r,M.identity):M.values(r):[]},M.size=function(r){return null==r?0:R(r)?r.length:M.keys(r).length},M.partition=function(r,t,e){t=_(t,e);var n=[],i=[];return M.each(r,function(r,e,o){(t(r,e,o)?n:i).push(r)}),[n,i]},M.first=M.head=M.take=function(r,t,e){return null!=r?null==t||e?r[0]:M.initial(r,r.length-t):void 0},M.initial=function(r,t,e){return f.call(r,0,Math.max(0,r.length-(null==t||e?1:t)))},M.last=function(r,t,e){return null!=r?null==t||e?r[r.length-1]:M.rest(r,Math.max(0,r.length-t)):void 0},M.rest=M.tail=M.drop=function(r,t,e){return f.call(r,null==t||e?1:t)},M.compact=function(r){return M.filter(r,M.identity)};var A=function(r,t,e,n){for(var i=[],o=0,a=n||0,u=L(r);u>a;a++){var s=r[a];if(R(s)&&(M.isArray(s)||M.isArguments(s))){t||(s=A(s,t,e));var c=0,l=s.length;for(i.length+=l;l>c;)i[o++]=s[c++]}else e||(i[o++]=s)}return i};M.flatten=function(r,t){return A(r,t,!1)},M.without=function(r){return M.difference(r,f.call(arguments,1))},M.uniq=M.unique=function(r,t,e,n){M.isBoolean(t)||(n=e,e=t,t=!1),null!=e&&(e=_(e,n));for(var i=[],o=[],a=0,u=L(r);u>a;a++){var s=r[a],c=e?e(s,a,r):s;t?(a&&o===c||i.push(s),o=c):e?M.contains(o,c)||(o.push(c),i.push(s)):M.contains(i,s)||i.push(s)}return i},M.union=function(){return M.uniq(A(arguments,!0,!0))},M.intersection=function(r){for(var t=[],e=arguments.length,n=0,i=L(r);i>n;n++){var o=r[n];if(!M.contains(t,o)){for(var a=1;e>a&&M.contains(arguments[a],o);a++);a===e&&t.push(o)}}return t},M.difference=function(r){var t=A(arguments,!0,!0,1);return M.filter(r,function(r){return!M.contains(t,r)})},M.zip=function(){return M.unzip(arguments)},M.unzip=function(r){for(var t=r&&M.max(r,L).length||0,e=Array(t),n=0;t>n;n++)e[n]=M.pluck(r,n);return e},M.object=function(r,t){for(var e={},n=0,i=L(r);i>n;n++)t?e[r[n]]=t[n]:e[r[n][0]]=r[n][1];return e},M.findIndex=n(1),M.findLastIndex=n(-1),M.sortedIndex=function(r,t,e,n){e=_(e,n,1);for(var i=e(t),o=0,a=L(r);a>o;){var u=Math.floor((o+a)/2);e(r[u])<i?o=u+1:a=u}return o},M.indexOf=i(1,M.findIndex,M.sortedIndex),M.lastIndexOf=i(-1,M.findLastIndex),M.range=function(r,t,e){null==t&&(t=r||0,r=0),e=e||1;for(var n=Math.max(Math.ceil((t-r)/e),0),i=Array(n),o=0;n>o;o++,r+=e)i[o]=r;return i};var j=function(r,t,e,n,i){if(!(n instanceof t))return r.apply(e,i);var o=T(r.prototype),a=r.apply(o,i);return M.isObject(a)?a:o};M.bind=function(r,t){if(m&&r.bind===m)return m.apply(r,f.call(arguments,1));if(!M.isFunction(r))throw new TypeError("Bind must be called on a function");var e=f.call(arguments,2),n=function(){return j(r,n,t,this,e.concat(f.call(arguments)))};return n},M.partial=function(r){var t=f.call(arguments,1),e=function(){for(var n=0,i=t.length,o=Array(i),a=0;i>a;a++)o[a]=t[a]===M?arguments[n++]:t[a];for(;n<arguments.length;)o.push(arguments[n++]);return j(r,e,this,this,o)};return e},M.bindAll=function(r){var t,e,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)e=arguments[t],r[e]=M.bind(r[e],r);return r},M.memoize=function(r,t){var e=function(n){var i=e.cache,o=""+(t?t.apply(this,arguments):n);return M.has(i,o)||(i[o]=r.apply(this,arguments)),i[o]};return e.cache={},e},M.delay=function(r,t){var e=f.call(arguments,2);return setTimeout(function(){return r.apply(null,e)},t)},M.defer=M.partial(M.delay,M,1),M.throttle=function(r,t,e){var n,i,o,a=null,u=0;e||(e={});var s=function(){u=e.leading===!1?0:M.now(),a=null,o=r.apply(n,i),a||(n=i=null)};return function(){var c=M.now();u||e.leading!==!1||(u=c);var l=t-(c-u);return n=this,i=arguments,0>=l||l>t?(a&&(clearTimeout(a),a=null),u=c,o=r.apply(n,i),a||(n=i=null)):a||e.trailing===!1||(a=setTimeout(s,l)),o}},M.debounce=function(r,t,e){var n,i,o,a,u,s=function(){var c=M.now()-a;t>c&&c>=0?n=setTimeout(s,t-c):(n=null,e||(u=r.apply(o,i),n||(o=i=null)))};return function(){o=this,i=arguments,a=M.now();var c=e&&!n;return n||(n=setTimeout(s,t)),c&&(u=r.apply(o,i),o=i=null),u}},M.wrap=function(r,t){return M.partial(t,r)},M.negate=function(r){return function(){return!r.apply(this,arguments)}},M.compose=function(){var r=arguments,t=r.length-1;return function(){for(var e=t,n=r[t].apply(this,arguments);e--;)n=r[e].call(this,n);return n}},M.after=function(r,t){return function(){return--r<1?t.apply(this,arguments):void 0}},M.before=function(r,t){var e;return function(){return--r>0&&(e=t.apply(this,arguments)),1>=r&&(t=null),e}},M.once=M.partial(M.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];M.keys=function(r){if(!M.isObject(r))return[];if(v)return v(r);var t=[];for(var e in r)M.has(r,e)&&t.push(e);return O&&o(r,t),t},M.allKeys=function(r){if(!M.isObject(r))return[];var t=[];for(var e in r)t.push(e);return O&&o(r,t),t},M.values=function(r){for(var t=M.keys(r),e=t.length,n=Array(e),i=0;e>i;i++)n[i]=r[t[i]];return n},M.mapObject=function(r,t,e){t=_(t,e);for(var n,i=M.keys(r),o=i.length,a={},u=0;o>u;u++)n=i[u],a[n]=t(r[n],n,r);return a},M.pairs=function(r){for(var t=M.keys(r),e=t.length,n=Array(e),i=0;e>i;i++)n[i]=[t[i],r[t[i]]];return n},M.invert=function(r){for(var t={},e=M.keys(r),n=0,i=e.length;i>n;n++)t[r[e[n]]]=e[n];return t},M.functions=M.methods=function(r){var t=[];for(var e in r)M.isFunction(r[e])&&t.push(e);return t.sort()},M.extend=x(M.allKeys),M.extendOwn=M.assign=x(M.keys),M.findKey=function(r,t,e){t=_(t,e);for(var n,i=M.keys(r),o=0,a=i.length;a>o;o++)if(n=i[o],t(r[n],n,r))return n},M.pick=function(r,t,e){var n,i,o={},a=r;if(null==a)return o;M.isFunction(t)?(i=M.allKeys(a),n=k(t,e)):(i=A(arguments,!1,!1,1),n=function(r,t,e){return t in e},a=Object(a));for(var u=0,s=i.length;s>u;u++){var c=i[u],l=a[c];n(l,c,a)&&(o[c]=l)}return o},M.omit=function(r,t,e){if(M.isFunction(t))t=M.negate(t);else{var n=M.map(A(arguments,!1,!1,1),String);t=function(r,t){return!M.contains(n,t)}}return M.pick(r,t,e)},M.defaults=x(M.allKeys,!0),M.create=function(r,t){var e=T(r);return t&&M.extendOwn(e,t),e},M.clone=function(r){return M.isObject(r)?M.isArray(r)?r.slice():M.extend({},r):r},M.tap=function(r,t){return t(r),r},M.isMatch=function(r,t){var e=M.keys(t),n=e.length;if(null==r)return!n;for(var i=Object(r),o=0;n>o;o++){var a=e[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var N=function(r,t,e,n){if(r===t)return 0!==r||1/r===1/t;if(null==r||null==t)return r===t;r instanceof M&&(r=r._wrapped),t instanceof M&&(t=t._wrapped);var i=p.call(r);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+r==""+t;case"[object Number]":return+r!==+r?+t!==+t:0===+r?1/+r===1/t:+r===+t;case"[object Date]":case"[object Boolean]":return+r===+t}var o="[object Array]"===i;if(!o){if("object"!=typeof r||"object"!=typeof t)return!1;var a=r.constructor,u=t.constructor;if(a!==u&&!(M.isFunction(a)&&a instanceof a&&M.isFunction(u)&&u instanceof u)&&"constructor"in r&&"constructor"in t)return!1}e=e||[],n=n||[];for(var s=e.length;s--;)if(e[s]===r)return n[s]===t;if(e.push(r),n.push(t),o){if(s=r.length,s!==t.length)return!1;for(;s--;)if(!N(r[s],t[s],e,n))return!1}else{var c,l=M.keys(r);if(s=l.length,M.keys(t).length!==s)return!1;for(;s--;)if(c=l[s],!M.has(t,c)||!N(r[c],t[c],e,n))return!1}return e.pop(),n.pop(),!0};M.isEqual=function(r,t){return N(r,t)},M.isEmpty=function(r){return null==r?!0:R(r)&&(M.isArray(r)||M.isString(r)||M.isArguments(r))?0===r.length:0===M.keys(r).length},M.isElement=function(r){return!(!r||1!==r.nodeType)},M.isArray=g||function(r){return"[object Array]"===p.call(r)},M.isObject=function(r){var t=typeof r;return"function"===t||"object"===t&&!!r},M.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(r){M["is"+r]=function(t){return p.call(t)==="[object "+r+"]"}}),M.isArguments(arguments)||(M.isArguments=function(r){return M.has(r,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(M.isFunction=function(r){return"function"==typeof r||!1}),M.isFinite=function(r){return isFinite(r)&&!isNaN(parseFloat(r))},M.isNaN=function(r){return M.isNumber(r)&&r!==+r},M.isBoolean=function(r){return r===!0||r===!1||"[object Boolean]"===p.call(r)},M.isNull=function(r){return null===r},M.isUndefined=function(r){return void 0===r},M.has=function(r,t){return null!=r&&d.call(r,t)},M.noConflict=function(){return a._=u,this},M.identity=function(r){return r},M.constant=function(r){return function(){return r}},M.noop=function(){},M.property=W,M.propertyOf=function(r){return null==r?function(){}:function(t){return r[t]}},M.matcher=M.matches=function(r){return r=M.extendOwn({},r),function(t){return M.isMatch(t,r)}},M.times=function(r,t,e){var n=Array(Math.max(0,r));t=k(t,e,1);for(var i=0;r>i;i++)n[i]=t(i);return n},M.random=function(r,t){return null==t&&(t=r,r=0),r+Math.floor(Math.random()*(t-r+1))},M.now=Date.now||function(){return(new Date).getTime()};var C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=M.invert(C),D=function(r){var t=function(t){return r[t]},e="(?:"+M.keys(r).join("|")+")",n=RegExp(e),i=RegExp(e,"g");return function(r){return r=null==r?"":""+r,n.test(r)?r.replace(i,t):r}};M.escape=D(C),M.unescape=D(E),M.result=function(r,t,e){var n=null==r?void 0:r[t];return void 0===n&&(n=e),M.isFunction(n)?n.call(r):n};var F=0;M.uniqueId=function(r){var t=++F+"";return r?r+t:t},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,U=function(r){return"\\"+H[r]};M.template=function(r,t,e){!t&&e&&(t=e),t=M.defaults({},t,M.templateSettings);var n=RegExp([(t.escape||I).source,(t.interpolate||I).source,(t.evaluate||I).source].join("|")+"|$","g"),i=0,o="__p+='";r.replace(n,function(t,e,n,a,u){return o+=r.slice(i,u).replace(B,U),i=u+t.length,e?o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o);
}catch(u){throw u.source=o,u}var s=function(r){return a.call(this,r,M)},c=t.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s},M.chain=function(r){var t=M(r);return t._chain=!0,t};var q=function(r,t){return r._chain?M(t).chain():t};M.mixin=function(r){M.each(M.functions(r),function(t){var e=M[t]=r[t];M.prototype[t]=function(){var r=[this._wrapped];return h.apply(r,arguments),q(this,e.apply(M,r))}})},M.mixin(M),M.each(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var t=s[r];M.prototype[r]=function(){var e=this._wrapped;return t.apply(e,arguments),"shift"!==r&&"splice"!==r||0!==e.length||delete e[0],q(this,e)}}),M.each(["concat","join","slice"],function(r){var t=s[r];M.prototype[r]=function(){return q(this,t.apply(this._wrapped,arguments))}}),M.prototype.value=function(){return this._wrapped},M.prototype.valueOf=M.prototype.toJSON=M.prototype.value,M.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return M})}).call(this)},{}]},{},[]);
